import{Q as $,a as C}from"./QTable.c2054143.js";import{_ as b,d as N,j as g,I as V,l as q,o as c,c as m,w as e,e as _,a as s,K as l,aK as y,aH as h}from"./index.d7174012.js";import{Q as v}from"./QTooltip.bed4ab08.js";import{Q as B}from"./QTd.966ae22d.js";import{Q as E}from"./QPageSticky.30c0f773.js";import{Q as R}from"./QPage.9f684324.js";import{u as T}from"./UseApi.a2b77885.js";import{u as L}from"./UseNotify.a6c7e20c.js";import{u as P}from"./use-quasar.123b33d8.js";import{c as S}from"./table.b7535668.js";import"./QList.9641f842.js";import"./QSelect.305f4da8.js";import"./QMenu.d5988db2.js";import"./format.93d0c760.js";import"./use-fullscreen.3cb924bc.js";const z=N({name:"PageAlunoList",setup(){const o=g([]),n=g(!0),u=V(),i="Aluno",d=P(),{list:p,remove:t}=T(),{notifyError:r,notifySuccess:Q}=L(),f=async()=>{try{n.value=!0,o.value=await p(i),n.value=!1}catch(a){r(a.message)}},k=a=>{u.push({name:"form-aluno",params:{id:a.id}})},w=async a=>{try{d.dialog({title:"Confirm",message:`Voc\xEA est\xE1 certo de deletar ${a.value.nome} ?`,cancel:!0,persistent:!0}).onOk(async()=>{await t(i,a.value.id),Q("Delete com sucesso"),f()})}catch(A){r(A.message)}};return q(()=>{f()}),{columnsAlunos:S,aluno:o,loading:n,handleEdit:k,handleRemoveAluno:w}}}),K={class:"rows"},j=_("span",{class:"text-h6"}," Alunos ",-1);function D(o,n,u,i,d,p){return c(),m(R,{padding:""},{default:e(()=>[_("div",K,[s(C,{rows:o.aluno,columns:o.columnsAlunos,"row-key":"id",class:"col-12",loading:o.loading},{top:e(()=>[j,s($),o.$q.platform.is.desktop?(c(),m(l,{key:0,label:"Adicionar",color:"secondary",icon:"mdi-plus",dense:"",to:{name:"form-aluno"}})):y("",!0)]),"body-cell-actions":e(t=>[s(B,{props:t,class:"q-gutter-x-sm"},{default:e(()=>[s(l,{icon:"mdi-pencil-outline",color:"info",dense:"",size:"sm",onClick:r=>o.handleEdit(t.row)},{default:e(()=>[s(v,null,{default:e(()=>[h(" Edit ")]),_:1})]),_:2},1032,["onClick"]),s(l,{icon:"mdi-delete-outline",color:"negative",dense:"",size:"sm",onClick:r=>o.handleRemoveAluno(t.row)},{default:e(()=>[s(v,null,{default:e(()=>[h(" Remove ")]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading"])]),s(E,{position:"bottom-right",offset:[18,18]},{default:e(()=>[o.$q.platform.is.mobile?(c(),m(l,{key:0,fab:"",icon:"mdi-plus",color:"secondary",to:{name:"form-aluno"}})):y("",!0)]),_:1})]),_:1})}var so=b(z,[["render",D]]);export{so as default};
