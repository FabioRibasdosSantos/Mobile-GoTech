import{Q as $}from"./QSpace.d2884989.js";import{_ as C,d as b,j as y,I as N,l as V,o as c,c as m,w as e,e as _,a as s,K as l,aK as g,aH as v}from"./index.625faa3f.js";import{Q}from"./QTooltip.b18e14a7.js";import{Q as q}from"./QTd.92f9058e.js";import{Q as B}from"./QTable.1e4e78e6.js";import{Q as E}from"./QPageSticky.7138a93b.js";import{Q as R}from"./QPage.5ab060c6.js";import{u as T}from"./UseApi.74ae8991.js";import{u as L}from"./UseNotify.d4ee6aa9.js";import{u as P}from"./use-quasar.1eadf056.js";import{c as S}from"./table.3b120f00.js";import"./QMenu.56312f34.js";import"./QList.eef8cc6b.js";import"./QSelect.39af7b46.js";import"./format.0866e07f.js";import"./use-fullscreen.e3399c05.js";const x=b({name:"PageAlunoList",setup(){const o=y([]),n=y(!0),u=N(),i="Aluno",d=P(),{list:p,remove:a}=T(),{notifyError:r,notifySuccess:h}=L(),f=async()=>{try{n.value=!0,o.value=await p(i),n.value=!1}catch(t){r(t.message)}},k=t=>{u.push({name:"form-aluno",params:{id:t.id}})},w=async t=>{try{d.dialog({title:"Confirm",message:`Voc\xEA est\xE1 certo de deletar ${t.value.nome} ?`,cancel:!0,persistent:!0}).onOk(async()=>{await a(i,t.value.id),h("Delete com sucesso"),f()})}catch(A){r(A.message)}};return V(()=>{f()}),{columnsAlunos:S,aluno:o,loading:n,handleEdit:k,handleRemoveAluno:w}}}),z={class:"rows"},K=_("span",{class:"text-h6"}," Alunos ",-1);function j(o,n,u,i,d,p){return c(),m(R,{padding:""},{default:e(()=>[_("div",z,[s(B,{rows:o.aluno,columns:o.columnsAlunos,"row-key":"id",class:"col-12",loading:o.loading},{top:e(()=>[K,s($),o.$q.platform.is.desktop?(c(),m(l,{key:0,label:"Adicionar",color:"secondary",icon:"mdi-plus",dense:"",to:{name:"form-aluno"}})):g("",!0)]),"body-cell-actions":e(a=>[s(q,{props:a,class:"q-gutter-x-sm"},{default:e(()=>[s(l,{icon:"mdi-pencil-outline",color:"info",dense:"",size:"xs",onClick:r=>o.handleEdit(a.row)},{default:e(()=>[s(Q,null,{default:e(()=>[v(" Edit ")]),_:1})]),_:2},1032,["onClick"]),s(l,{icon:"mdi-delete-outline",color:"negative",dense:"",size:"xs",onClick:r=>o.handleRemoveAluno(a.row)},{default:e(()=>[s(Q,null,{default:e(()=>[v(" Remove ")]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading"])]),s(E,{position:"bottom-left",offset:[15,10]},{default:e(()=>[o.$q.platform.is.mobile?(c(),m(l,{key:0,fab:"",icon:"mdi-plus",color:"secondary",to:{name:"form-aluno"}})):g("",!0)]),_:1})]),_:1})}var to=C(x,[["render",j]]);export{to as default};
