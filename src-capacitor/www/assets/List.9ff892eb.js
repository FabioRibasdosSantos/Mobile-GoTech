import{Q as $,a as C}from"./QTable.5b775e2d.js";import{_ as b,d as N,j as y,I as V,l as q,o as c,c as u,w as e,e as h,a as s,K as l,aK as g,aH as v}from"./index.3716ff62.js";import{Q as _}from"./QTooltip.81a76ccb.js";import{Q as B}from"./QTd.f966baf3.js";import{Q as E}from"./QPageSticky.2eb95989.js";import{Q as R}from"./QPage.6bcf8752.js";import{u as T}from"./UseApi.8115085a.js";import{u as L}from"./UseNotify.2d23bdf3.js";import{u as P}from"./use-quasar.70d57dbe.js";import{c as S}from"./table.3b120f00.js";import"./QList.be1e1ace.js";import"./QSelect.bb2a7487.js";import"./QMenu.6b6d0329.js";import"./format.475b1533.js";import"./use-fullscreen.9481c0a9.js";const x=N({name:"PageAlunoList",setup(){const o=y([]),n=y(!0),m=V(),i="Aluno",d=P(),{list:p,remove:t}=T(),{notifyError:r,notifySuccess:Q}=L(),f=async()=>{try{n.value=!0,o.value=await p(i),n.value=!1}catch(a){r(a.message)}},k=a=>{m.push({name:"form-aluno",params:{id:a.id}})},w=async a=>{try{d.dialog({title:"Confirm",message:`Voc\xEA est\xE1 certo de deletar ${a.value.nome} ?`,cancel:!0,persistent:!0}).onOk(async()=>{await t(i,a.value.id),Q("Delete com sucesso"),f()})}catch(A){r(A.message)}};return q(()=>{f()}),{columnsAlunos:S,aluno:o,loading:n,handleEdit:k,handleRemoveAluno:w}}}),z={class:"rows"},K=h("span",{class:"text-h6"}," Alunos ",-1);function j(o,n,m,i,d,p){return c(),u(R,{padding:""},{default:e(()=>[h("div",z,[s(C,{rows:o.aluno,columns:o.columnsAlunos,"row-key":"id",class:"col-12",loading:o.loading},{top:e(()=>[K,s($),o.$q.platform.is.desktop?(c(),u(l,{key:0,label:"Adicionar",color:"secondary",icon:"mdi-plus",dense:"",to:{name:"form-aluno"}})):g("",!0)]),"body-cell-actions":e(t=>[s(B,{props:t,class:"q-gutter-x-sm"},{default:e(()=>[s(l,{icon:"mdi-pencil-outline",color:"info",dense:"",size:"xs",onClick:r=>o.handleEdit(t.row)},{default:e(()=>[s(_,null,{default:e(()=>[v(" Edit ")]),_:1})]),_:2},1032,["onClick"]),s(l,{icon:"mdi-delete-outline",color:"negative",dense:"",size:"xs",onClick:r=>o.handleRemoveAluno(t.row)},{default:e(()=>[s(_,null,{default:e(()=>[v(" Remove ")]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading"])]),s(E,{position:"bottom-left",offset:[15,10]},{default:e(()=>[o.$q.platform.is.mobile?(c(),u(l,{key:0,fab:"",icon:"mdi-plus",color:"secondary",to:{name:"form-aluno"}})):g("",!0)]),_:1})]),_:1})}var so=b(x,[["render",j]]);export{so as default};
